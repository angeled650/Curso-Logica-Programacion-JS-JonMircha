<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ejercicio 17</title>
  <style>
    html {
      box-sizing: border-box;
      font-family: sans-serif;
      font-size: 16px;
      text-align: center;
    }

    *,
    *::before,
    *::after {
      box-sizing: inherit;
    }
  </style>
</head>

<body>
  <h1>Ejercicio 17</h1>
  <p>
    Programa una función que dada una fecha válida determine cuantos años han pasado hasta el día de hoy, pe.
    miFuncion(new
    Date(1984,4,23)) devolverá 35 años (en 2020).
  </p>
  <hr>
  <a href="./index.html">Regregar a la Página Principal</a>

  <script>
    //17) Programa una función que dada una fecha válida determine cuantos años han pasado hasta el día de hoy, pe. miFuncion(new Date(1984,4,23)) devolverá 35 años (en 2020).

    let cadDia = prompt("Ingrese el dia: ");
    let dia = parseInt(cadDia);
    let cadMes = prompt("Ingrese el mes: ");
    let mes = parseInt(cadMes);
    let cadAnio = prompt("Ingrese el año: ");
    let anio = parseInt(cadAnio);

    const validaciones = (diax = undefined, mesx = undefined, aniox = undefined) => {
      if (!diax || !mesx || !aniox) {
        return alert("No ha ingresado ningún número en uno de los campos.");
      }

      if ((Math.sign(diax) === -1) || (Math.sign(mesx) === -1) || (Math.sign(aniox) === -1)) {
        return alert("No puede ingresar un número negativo.");
      }

      if (mesx > 12) {
        return alert("El mes no puede ser mayor a 12.");
      }

      mesx--;

      if ((mesx === 0 || mesx === 2 || mesx === 4 || mesx === 6 || mesx === 7 || mesx === 9 || mesx === 11) && (diax > 31)) {
        return alert("El día no puede ser mayor a 31.");
      }

      if ((mesx === 3 || mesx === 5 || mesx === 8 || mesx === 10) && (diax > 30)) {
        return alert("El día no puede ser mayor a 30.");
      }

      if ((mesx === 1) && (aniox % 4 === 0 && (aniox % 100 !== 0 || aniox % 400 === 0)) && (diax > 29)) {
        return alert("El día no puede ser mayor a 29 porque el año ingresado es bisiesto.");
      } else if ((mesx === 1) && (diax > 28)) {
        return alert("El día no puede ser mayor a 28 porque el año ingresado no es bisiesto.");
      }

      fecha = new Date(aniox, mesx, diax);
      aniosTranscurridos(fecha);
    }

    const aniosTranscurridos = (fechaAnterior) => {
      let fechaActual = new Date();
      let diaAntes = fechaAnterior.getDate();
      let mesAntes = fechaAnterior.getMonth() + 1;
      let anioAntes = fechaAnterior.getFullYear();
      let diaActual = fechaActual.getDate();
      let mesActual = fechaActual.getMonth() + 1;
      let anioActual = fechaActual.getFullYear();

      let resta = fechaActual.getTime() - fechaAnterior.getTime();
      let anioConv = 1000 * 60 * 60 * 24 * 365;
      let anioTrans = Math.floor(resta / anioConv);

      if (anioTrans === 1) {
        alert(`De la fecha ${diaAntes}/${mesAntes}/${anioAntes} a la fecha ${diaActual}/${mesActual}/${anioActual} ha pasado: ${anioTrans} año.`);
      } else if (Math.sign(anioTrans) === -1 && anioTrans === -1) {
        alert(`De la fecha ${diaAntes}/${mesAntes}/${anioAntes} a la fecha ${diaActual}/${mesActual}/${anioActual} falta: ${Math.abs(anioTrans)} año.`);
      } else if (Math.sign(anioTrans) === -1) {
        alert(`De la fecha ${diaAntes}/${mesAntes}/${anioAntes} a la fecha ${diaActual}/${mesActual}/${anioActual} faltan: ${Math.abs(anioTrans)} años.`);
      } else {
        alert(`De la fecha ${diaAntes}/${mesAntes}/${anioAntes} a la fecha ${diaActual}/${mesActual}/${anioActual} han pasado: ${anioTrans} años.`);
      }
    }

    validaciones(dia, mes, anio);

  </script>
</body>

</html>